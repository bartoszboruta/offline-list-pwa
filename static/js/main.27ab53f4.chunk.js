(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(0),o=n.n(a).a.createContext({active:0,done:0,filteredTodos:[],nameFilter:"",onAddTodo:function(){},onChangeNameFilter:function(){},onRemoveTodo:function(){},onToggle:function(){},onUpdateTodo:function(){},showAddField:"",showNameFilter:"",todos:[]})},14:function(e,t,n){e.exports=n(26)},19:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(6),i=n.n(r),l=(n(19),n(21),n(7)),c=n(8),s=n(9),d=n(12),u=n(10),m=n(13),h=n(4),f=n(1),v=function(){var e=Object(a.useContext)(f.a).onAddTodo,t=Object(a.useState)(""),n=Object(h.a)(t,2),r=n[0],i=n[1],l=Object(a.useState)(""),c=Object(h.a)(l,2),s=c[0],d=c[1];return o.a.createElement("div",{className:"add"},o.a.createElement("form",null,o.a.createElement("div",{className:"group"},o.a.createElement("input",{onChange:function(e){var t=e.target.value;return i(t)},placeholder:"New task",title:"title",value:r}),o.a.createElement("span",{className:"highlight"}),o.a.createElement("span",{className:"bar"})),o.a.createElement("div",null,o.a.createElement("div",{className:"group"},o.a.createElement("input",{onChange:function(e){var t=e.target.value;return d(t)},type:"date",value:s}),o.a.createElement("span",{className:"highlight"}),o.a.createElement("span",{className:"bar"}))),o.a.createElement("button",{className:"btn",disabled:!r,onClick:function(t){t.preventDefault(),i(""),d(""),e({expireDate:s,title:r})},type:"submit"},"Add")))},g=function(){var e=Object(a.useContext)(f.a),t=e.onChangeNameFilter,n=e.nameFilter;return o.a.createElement("div",{className:"nameFilter"},o.a.createElement("div",{className:"group"},o.a.createElement("input",{onChange:t,placeholder:"Search",value:n}),o.a.createElement("span",{className:"highlight"}),o.a.createElement("span",{className:"bar"})))},p=n(3),w=n.n(p),E=function(){var e=Object(a.useContext)(f.a),t=e.active,n=e.filteredTodos,r=e.onToggle,i=e.showNameFilter,l=e.showAddField,c=w()("fa fa-search icon",{active:i}),s=w()("fa fa-plus icon",{active:l});return o.a.createElement("div",{className:"header"},o.a.createElement("i",{className:c,onClick:function(){return r("showNameFilter")}}),o.a.createElement("div",{className:"header__container"},o.a.createElement("i",null,"Tasks"),o.a.createElement("i",{className:"counter"},t," / ",n.length)),o.a.createElement("i",{className:s,onClick:function(){return r("showAddField")}}))},b=new(n(11).a)("TodoList");b.version(1).stores({todos:"++id"});var N=b,F=Object(a.lazy)(function(){return n.e(1).then(n.bind(null,27))}),T=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={active:0,done:0,filteredTodos:[],nameFilter:localStorage.getItem("nameFilter")||"",showAddField:"true"===localStorage.getItem("showAddField"),showNameFilter:"true"===localStorage.getItem("showNameFilter"),todos:[]},n.componentDidMount=function(){n._getTodos()},n._getTodos=function(){N.table("todos").toArray().then(function(e){n.setState({todos:e.sort(function(e,t){return t.id-e.id})},function(){n._applyFilters()})})},n._handleAddTodo=function(e){var t=e.expireDate,a=e.title,o={createdAt:new Date,done:!1,expireDate:t,updatedAt:new Date,title:a};N.table("todos").add(o).then(n._getTodos)},n._handleUpdateTodo=function(e){var t=e.done,a=e.id;return function(){N.table("todos").update(a,{done:!t,updatedAt:new Date}).then(n._getTodos)}},n._handleRemoveTodo=function(e){var t=e.id;return function(){N.table("todos").delete(t).then(n._getTodos)}},n._applyFilters=function(){var e=n.state,t=e.nameFilter,a=e.todos.filter(function(e){return e.title.toLowerCase().includes(t.toLowerCase())});n.setState({filteredTodos:a},n._updateCounter)},n._handleNameFilterChange=function(e){var t=e.target.value;n.setState({nameFilter:t},function(){localStorage.setItem("nameFilter",t),n._applyFilters()})},n._handleToggle=function(e){if(e){var t=n.state[e];n.setState(Object(l.a)({},e,!t),function(){localStorage.setItem(e,!t),"showNameFilter"===e&&t&&n._handleNameFilterChange({target:{value:""}})})}},n._updateCounter=function(){var e=n.state.filteredTodos.filter(function(e){return!e.done}).length;n.setState({active:e})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.active,n=e.nameFilter,r=e.todos,i=e.filteredTodos,l=e.showNameFilter,c=e.showAddField;return o.a.createElement(f.a.Provider,{value:{active:t,filteredTodos:i,nameFilter:n,onAddTodo:this._handleAddTodo,onChangeNameFilter:this._handleNameFilterChange,onRemoveTodo:this._handleRemoveTodo,onToggle:this._handleToggle,onUpdateTodo:this._handleUpdateTodo,showAddField:c,showNameFilter:l,todos:r}},o.a.createElement(E,null),o.a.createElement("div",{className:"container"},o.a.createElement("div",null,l&&o.a.createElement(g,null),c&&o.a.createElement(v,null)),o.a.createElement(a.Suspense,{fallback:o.a.createElement("div",null,"Loading...")},o.a.createElement(F,null))))}}]),t}(a.Component),A=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(T,null))},C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(A,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/offline-list-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/offline-list-pwa","/service-worker.js");C?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):_(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):_(t,e)})}}()}},[[14,3,2]]]);
//# sourceMappingURL=main.27ab53f4.chunk.js.map