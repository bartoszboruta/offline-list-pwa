(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(25)},18:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(10),i=a.n(r),l=(a(18),a(20),a(3)),c=a(4),s=a(6),d=a(5),u=a(7),m=a(11),h=a(8),f=o.a.createContext({active:0,done:0,filteredTodos:[],nameFilter:"",onAddTodo:function(){},onChangeNameFilter:function(){},onRemoveTodo:function(){},onToggle:function(){},onUpdateTodo:function(){},showAddField:"",showNameFilter:"",todos:[]}),v=function(){var e=Object(n.useContext)(f).onAddTodo,t=Object(n.useState)(""),a=Object(h.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(""),c=Object(h.a)(l,2),s=c[0],d=c[1];return o.a.createElement("div",{className:"add"},o.a.createElement("div",{className:"group"},o.a.createElement("input",{onChange:function(e){var t=e.target.value;return i(t)},placeholder:"New task",title:"title",value:r}),o.a.createElement("span",{className:"highlight"}),o.a.createElement("span",{className:"bar"})),o.a.createElement("div",null,o.a.createElement("div",{className:"group"},o.a.createElement("input",{onChange:function(e){var t=e.target.value;return d(t)},type:"date",value:s}),o.a.createElement("span",{className:"highlight"}),o.a.createElement("span",{className:"bar"}))),o.a.createElement("button",{className:"btn",disabled:!r,onClick:function(){i(""),d(""),e({expireDate:s,title:r})}},"Add"))},g=function(){var e=Object(n.useContext)(f),t=e.onChangeNameFilter,a=e.nameFilter;return o.a.createElement("div",{className:"nameFilter"},o.a.createElement("div",{className:"group"},o.a.createElement("input",{onChange:t,placeholder:"Search",value:a}),o.a.createElement("span",{className:"highlight"}),o.a.createElement("span",{className:"bar"})))},p=a(1),w=a.n(p),b=function(){var e=Object(n.useContext)(f),t=e.showNameFilter,a=e.showAddField,r=e.onToggle,i=w()("fa fa-search icon",{active:t}),l=w()("fa fa-plus icon",{active:a});return o.a.createElement("div",{className:"header"},o.a.createElement("i",{className:i,onClick:function(){return r("showNameFilter")}}),o.a.createElement("i",null,"Tasks"),o.a.createElement("i",{className:l,onClick:function(){return r("showAddField")}}))},E=function(e){var t=e.todo,a=Object(n.useContext)(f),r=a.onRemoveTodo,i=a.onUpdateTodo,l=t.done,c=t.expireDate,s=t.title,d=function(e){if(e){var t=new Date,a=new Date(e),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),o=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.floor((o-n)/864e5)}}(c),u=function(e){return 0===e?"expires today":1===e?"expires tomorrow":e>30?"expires in +30 days":e>0&&e<30?"expires in ".concat(e," days"):-1===e?"expired yesterday":e<-1?"expired ".concat(Math.abs(e)," days ago"):e?void 0:""}(d),m=w()("todo__title",{checked:l}),h=w()("fa fa-check-circle",{checked:l}),v=w()("todo__date",{expired:d<0&&!l,today:0===d,tomorrow:1===d});return o.a.createElement("div",{className:"todo"},o.a.createElement("div",{className:v},u),o.a.createElement("div",{className:"todo__container"},o.a.createElement("i",{className:"todo__remove fa fa-minus-circle",onClick:r(t)}),o.a.createElement("div",{className:m},s),o.a.createElement("div",{className:"todo__input"},o.a.createElement("label",{className:"label"},o.a.createElement("input",{checked:l,className:"label__checkbox",onChange:i(t),type:"checkbox"}),o.a.createElement("i",{className:h})))))},N=function(){var e=Object(n.useContext)(f).filteredTodos;return o.a.createElement("div",{className:"list"},e.map(function(e){return o.a.createElement(E,{key:e.id,todo:e})}))},T=new(a(12).a)("TodoList");T.version(1).stores({todos:"++id"});var F=T,_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={active:0,done:0,filteredTodos:[],nameFilter:localStorage.getItem("nameFilter")||"",showAddField:"true"===localStorage.getItem("showAddField"),showNameFilter:"true"===localStorage.getItem("showNameFilter"),todos:[]},a.componentDidMount=function(){a._getTodos()},a._getTodos=function(){F.table("todos").toArray().then(function(e){a.setState({todos:e.sort(function(e,t){return t.id-e.id})},function(){a._applyFilters()})})},a._handleAddTodo=function(e){var t=e.expireDate,n=e.title,o={createdAt:new Date,done:!1,expireDate:t,updatedAt:new Date,title:n};F.table("todos").add(o).then(a._getTodos)},a._handleUpdateTodo=function(e){var t=e.done,n=e.id;return function(){console.log(t,n),F.table("todos").update(n,{done:!t,updatedAt:new Date}).then(a._getTodos)}},a._handleRemoveTodo=function(e){var t=e.id;return function(){F.table("todos").delete(t).then(a._getTodos)}},a._applyFilters=function(){var e=a.state,t=e.nameFilter,n=e.todos.filter(function(e){return e.title.toLowerCase().includes(t.toLowerCase())});a.setState({filteredTodos:n})},a._handleNameFilterChange=function(e){var t=e.target.value;a.setState({nameFilter:t},function(){localStorage.setItem("nameFilter",t),a._applyFilters()})},a._handleToggle=function(e){if(e){var t=a.state[e];a.setState(Object(m.a)({},e,!t),function(){localStorage.setItem(e,!t),"showNameFilter"===e&&t&&a._handleNameFilterChange({target:{value:""}})})}},a._updateCounter=function(){var e=a.state.filteredTodos,t=e.filter(function(e){return!e.done}).length,n=e.filter(function(e){return e.done}).length;a.setState({active:t,done:n})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.nameFilter,a=e.todos,n=e.filteredTodos,r=e.showNameFilter,i=e.showAddField;return o.a.createElement(f.Provider,{value:{filteredTodos:n,nameFilter:t,onAddTodo:this._handleAddTodo,onChangeNameFilter:this._handleNameFilterChange,onRemoveTodo:this._handleRemoveTodo,onToggle:this._handleToggle,onUpdateTodo:this._handleUpdateTodo,showAddField:i,showNameFilter:r,todos:a}},o.a.createElement(b,null),o.a.createElement("div",{className:"container"},o.a.createElement("div",null,r&&o.a.createElement(g,null),i&&o.a.createElement(v,null)),o.a.createElement(N,null)))}}]),t}(n.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(_,null))}}]),t}(n.Component),y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(C,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/offline-list-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/offline-list-pwa","/service-worker.js");y?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):k(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):k(t,e)})}}()}},[[13,2,1]]]);
//# sourceMappingURL=main.62ef5f36.chunk.js.map